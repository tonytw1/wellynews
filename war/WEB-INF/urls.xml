<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>

	<bean id="urlCleaner" class="nz.co.searchwellington.utils.UrlCleaner">
		<constructor-arg ref="urlResolverService" />		
	</bean>
	
	<bean id="urlResolverService" class="nz.co.searchwellington.urls.CachingUrlResolverService">
		<constructor-arg>
			<bean class="nz.co.searchwellington.repositories.redis.RedisKeyStore">
				<property name="keyPrefix" value="resolved-urls::" />
				<property name="redisHostname" value="${redis.hostname}" />
				<property name="redisPort" value="${redis.port}" />
			</bean>
		</constructor-arg>
		<constructor-arg>
			<list>
				<ref bean="feedBurnerRedirectResolver" />
				<ref bean="tinyUrlResolver" />
				<ref bean="bitlyUrlResolver" />
			</list>
		</constructor-arg>
	</bean>
			
	<bean id="bitlyUrlResolver" class="nz.co.searchwellington.urls.BitlyUrlResolver" />
	<bean id="tinyUrlResolver" class="nz.co.searchwellington.urls.TinyUrlResolver" />
	<bean id="feedBurnerRedirectResolver" class="nz.co.searchwellington.urls.FeedBurnerRedirectResolver" />

</beans>