<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>


	<bean id="editController" class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager" ref="transactionManager" />
		<property name="target" ref="editControllerTarget" />
		<property name="transactionAttributeSource">
			<bean class="org.springframework.transaction.annotation.AnnotationTransactionAttributeSource" />
		</property>	
	</bean>



	<bean id="editControllerTarget" class="nz.co.searchwellington.controllers.ResourceEditController">
		<constructor-arg ref="cachingRssfeedNewsitemService" />
		<constructor-arg ref="adminRequestFilter" />	
		<constructor-arg ref="tagWidgetFactory" />
		<constructor-arg ref="autoTaggingService" />
		<constructor-arg ref="acceptanceWidgetFactory" />
		<constructor-arg ref="rssPrefetcher" />
		<constructor-arg ref="loggedInUserFilter" />
		<constructor-arg ref="editPermissionService" />
		<constructor-arg ref="urlStack" />
		<constructor-arg ref="twitterNewsitemBuilderService" />
		<constructor-arg ref="submissionProcessingService" />
		<constructor-arg ref="contentUpdateService" />
		<constructor-arg ref="contentDeletionService" />
		<constructor-arg ref="resourceDAO" />
		<constructor-arg ref="snapshotBodyExtractor" />
		<constructor-arg ref="anonUserService" />
		<constructor-arg ref="contentRetrievalService" />
		<constructor-arg ref="handTaggingDAO" />		
		
		<property name="methodNameResolver">
			<bean class="org.springframework.web.servlet.mvc.multiaction.PropertiesMethodNameResolver">
				<property name="mappings">
					<props>
						<prop key="/edit/edit">edit</prop>
						<prop key="/edit/save">save</prop>
						<prop key="/edit/delete">delete</prop>						
						<prop key="/edit/submit/calendar">submitCalendar</prop>
						<prop key="/edit/submit/feed">submitFeed</prop>
						<prop key="/edit/submit/newsitem">submitNewsitem</prop>
						<prop key="/edit/submit/watchlist">submitWatchlist</prop>
						<prop key="/edit/submit/website">submitWebsite</prop>
						
						<prop key="/edit/accept">accept</prop>
						<prop key="/edit/twitteraccept">twitteraccept</prop>
						
						<prop key="/edit/viewsnapshot">viewSnapshot</prop>	
					</props>
				</property>
			</bean>		
		</property>
	</bean>


	<bean id="tagEditController" class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
		<property name="transactionManager" ref="transactionManager" />
		<property name="target" ref="tagEditControllerTarget" />
		<property name="transactionAttributeSource">
			<bean class="org.springframework.transaction.annotation.AnnotationTransactionAttributeSource" />
		</property>	
	</bean>
	
	
	<bean id="tagEditControllerTarget" class="nz.co.searchwellington.controllers.admin.TagEditController">
		<constructor-arg ref="adminRequestFilter" />
		<constructor-arg ref="tagWidgetFactory" />
		<constructor-arg ref="urlStack" />
		<constructor-arg ref="tagDAO" />
		<constructor-arg ref="tagModificationService" />
		<constructor-arg ref="editPermissionService" />
		<constructor-arg ref="loggedInUserFilter" />
		
		<property name="methodNameResolver">
			<bean class="org.springframework.web.servlet.mvc.multiaction.PropertiesMethodNameResolver">
				<property name="mappings">
					<props>
						<prop key="/edit/tag/submit">submit</prop>
						<prop key="/edit/tag/save">save</prop>												
						<prop key="/edit/tag/*">edit</prop>
						<prop key="/edit/tag/delete">delete</prop>
					</props>
				</property>
			</bean>
		</property>
	</bean>
	
	
	<bean id="autoGatherController" class="nz.co.searchwellington.controllers.admin.PublisherAutoGatherController">
		<constructor-arg ref="adminRequestFilter" />	
		<constructor-arg ref="tagDAO" />		
		<constructor-arg ref="resourceDAO" />		
		<constructor-arg ref="contentUpdateService" />
		
		<property name="methodNameResolver">
			<bean class="org.springframework.web.servlet.mvc.multiaction.PropertiesMethodNameResolver">
				<property name="mappings">
					<props>																
						<prop key="/admin/gather">prompt</prop>
						<prop key="/admin/gather/apply">apply</prop>
					</props>
				</property>
			</bean>		
		</property>
	</bean>
	
		
	<bean id="supressionController" class="nz.co.searchwellington.controllers.admin.SupressionController">	
		<constructor-arg ref="urlStack" />
		<constructor-arg ref="loggedInUserFilter" />		
		<constructor-arg ref="suppressionService" />
		<property name="methodNameResolver">
			<bean class="org.springframework.web.servlet.mvc.multiaction.PropertiesMethodNameResolver">
				<property name="mappings">
					<props>
						<prop key="/supress/supress">supress</prop>
						<prop key="/supress/unsupress">unsupress</prop>
					</props>
				</property>
			</bean>		
		</property>
	</bean>
	
		
	<bean id="adminIndexController" class="nz.co.searchwellington.controllers.admin.AdminIndexController">
		<constructor-arg ref="keystore" />
		<constructor-arg ref="cacheManager" />
		<property name="methodNameResolver">
			<bean class="org.springframework.web.servlet.mvc.multiaction.PropertiesMethodNameResolver">
				<property name="mappings">
					<props>														
						<prop key="/admin/index">index</prop>							
					</props>
				</property>
			</bean>		
		</property>
	</bean>
	
		
	<bean id="indexRebuildController" class="nz.co.searchwellington.controllers.admin.IndexRebuildController">
		<constructor-arg ref="solrIndexRebuildService" />
		<constructor-arg ref="cachingTwitterService" />
		<constructor-arg ref="resourceDAO" />
		
		<property name="methodNameResolver">
			<bean class="org.springframework.web.servlet.mvc.multiaction.PropertiesMethodNameResolver">
				<property name="mappings">
					<props>														
						<prop key="/admin/indexbuilder">build</prop>
						<prop key="/admin/refreshtweets">refreshTweets</prop>						
					</props>
				</property>
			</bean>		
		</property>	
	</bean>
	
		
	<bean id="configEditController" class="nz.co.searchwellington.controllers.admin.ConfigEditController">
		<constructor-arg ref="configDAO" />		
		<property name="methodNameResolver">
			<bean class="org.springframework.web.servlet.mvc.multiaction.PropertiesMethodNameResolver">
				<property name="mappings">
					<props>														
						<prop key="/admin/config/edit">edit</prop>
						<prop key="/admin/config/save">save</prop>
					</props>
				</property>
			</bean>		
		</property>
	</bean>
	
			
	<bean id="linkCheckerController" class="nz.co.searchwellington.controllers.admin.LinkCheckerController">
		<constructor-arg ref="adminRequestFilter" />		
		<constructor-arg ref="linkCheckerQueue" />
		<constructor-arg ref="urlStack" />
		<constructor-arg ref="resourceDAO" />
		
		<property name="methodNameResolver">
			<bean class="org.springframework.web.servlet.mvc.multiaction.PropertiesMethodNameResolver">
				<property name="mappings">
					<props>
						<prop key="/admin/linkchecker/status">showStatus</prop>
						<prop key="/admin/linkchecker/add">addToQueue</prop>								
					</props>
				</property>
			</bean>		
		</property>
	</bean>
	
	
	<bean id="publishersAjaxController" class="nz.co.searchwellington.controllers.ajax.PublisherAjaxController">
		<constructor-arg ref="resourceDAO" />	
	</bean>
	
	
			
</beans>